<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow SYSTEM "OSWf-3.0.dtd">
<workflow>

  <initial-actions>
    <action id="100" name="Start Workflow">
        
      <!-- Set 'message' to 'foo' and check --> 
       
      <pre-functions>
        <function type="beanshell">
          <arg name="script">
            typedMap.setString("message", "foo");
          </arg>
        </function>        
      </pre-functions>
      
      <results>
        <default-result status="Underway" step="1"/>
      </results>
    </action>
  </initial-actions>


  <steps>
    <step id="1" name="First Step">
      <actions>
        <action id="1" name="The first action" finish="true" auto="true">
            
          <pre-functions>

            <function type="class">
              <arg name="classname">tests.util.VerifyArg</arg>
              <arg name="expected">foo</arg>
              <arg name="actual">${message}</arg>
            </function>
              
            <function type="beanshell">
              <arg name="script">
                typedMap.setString("message", "bar");
              </arg>
            </function>
            
            <function type="class">
              <arg name="classname">tests.util.VerifyArg</arg>
              <arg name="expected">bar</arg>
              <arg name="actual">${message}</arg>
            </function>
          </pre-functions>
          
          <results>
            <default-result/>
          </results>
          
        </action>
      </actions>
    </step>
 
  </steps>
  
</workflow>

