<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//Open Source Workflow//DTD OSWf 3.0//EN" "http://oswf.sourceforge.net/OSWf-3.0.dtd">

<workflow>

  <!-- I N I T I A L - A C T I O N S  ===================================================== -->
  
  <initial-actions>

    <action id="1" name="Initial Split">
      <results>
        <default-result split="1" />
      </results>
    </action>

    <action id="2" name="Step 1: Pending">
      <results>
        <default-result step="1" />
      </results>
    </action>

    <action id="3" name="Step 2: Pending">
      <results>
        <default-result step="2" />
      </results>
    </action>

    <action id="4" name="Step 1: Automatic">
      <results>
        <default-result status="Automatic" step="1" />
      </results>
    </action>

    <action id="5" name="Step 2: Automatic">
      <results>
        <default-result status="Automatic" step="2" />
      </results>
    </action>


  </initial-actions>

  <!-- S T E P S  ========================================================================= -->

  <steps>
  
    <step id="1" name="Step 1">
      <actions>

        <action id="10" name="auto-action" auto="true">
          <restrict-to>
            <conditions>
              <condition type='alias' name='hasStatusOf'>
                <arg name="stepId">11</arg>
                <arg name="status">Automatic</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <default-result step="1"/>
          </results>
        </action>

        <action id="11" name='Finish'>
          <results>
            <unconditional-result old-status='old-status' step="3"/> 
         </results>
        </action>

      </actions>
    </step>

    <step id="2" name="Step 2">

      <actions>

        <action id="20" name="auto-action" auto="true">
          <restrict-to>
            <conditions>
              <condition type='alias' name='hasStatusOf'>
                <arg name="stepId">12</arg>
                <arg name="status">Automatic</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <default-result step="2"/>
          </results>
          
        </action>

        <action id="21" name='Finish'>
          <results>
            <default-result step="3"/>
          </results>
        </action>

      </actions>
    </step>

    <step id='3' name='End' />

  </steps>

  <!-- S P L I T S  ======================================================================= -->
  
  <splits>
    <split id="1">
      <default-result  exit-status="Split" status="Automatic" step="1"/>
      <default-result  exit-status="Split" status="Automatic" step="2"/>
    </split>

  </splits>

</workflow>

